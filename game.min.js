$(function(){init(12)});var upperBound=4096;var power=12;
function init(u){upperBound=1;if($("#pow").val()){if($("#pow").val()<=2){window.alert("Enter n greater than 2");return false}else if(isNaN($("#pow").val())){window.alert("This is not a Number");return false}else{u=$("#pow").val();power=u}$("#pow").blur()}else if(isNaN($("#pow").val())){window.alert("This is not a Number");return false}else power=u;for(var b=u;b>=1;b--)upperBound=upperBound*2;changeGame();$("#title").text(upperBound);$("#myTable").hide();$("#score").val(score);$("#moves").val(moves);
setTimeout("gameloading()",100)}function restart(){moves=0;score=0;for(var m=0;m<=3;m++)for(var n=0;n<=3;n++)$("#"+m+""+n).val("");init(power)}function changeGame(){score=0;moves=0;for(var m=0;m<=3;m++)for(var n=0;n<=3;n++)$("#"+m+""+n).val("")}
function gameloading(){$("#myTable").show();changeColor();var r1=Math.floor(Math.random()*3+1);var r2=Math.floor(Math.random()*3+1);for(var i=0;i<r1;i++)for(var j=0;j<r2;j++){var k=Math.floor(Math.random()*2+0);if(k==1)$("#"+i+""+j).val("2")}changeColor()}var count;var moves=0;var score=0;var randomElement=0;document.onkeydown=checkKey;
function checkKey(e){e=e||window.event;if(e.keyCode=="37"){left();moves++}else if(e.keyCode=="38"){up();moves++}else if(e.keyCode=="39"){right();moves++}else if(e.keyCode=="40"){down();moves++}gameOver();$("#score").val(score);$("#moves").val(moves)}function left(){for(var i=0;i<=3;i++){changeColor();subleft(i);changeColor()}addLeftMove();changeColor()}
function subleft(i){var A=new Array;var track=i;count=1;var f=0;for(var j=0;j<4;j++)if($("#"+i+""+j).val()!=""){A[count]=$("#"+i+""+j).val()-0;count++}j=0;count--;for(var k=1;k<=count;k++){$("#"+i+""+j).val(A[k]);j++}for(var h=j;h<4;h++){$("#"+i+""+h).val("");j++}for(j=0;j<=2;j++)if($("#"+i+""+j).val()==$("#"+i+""+(j+1)).val()&&$("#"+i+""+j).val()!=""&&$("#"+i+""+(j+1)).val()!=""){$("#"+i+""+j).val($("#"+i+""+j).val()-0+($("#"+i+""+(j+1)).val()-0));$("#"+i+""+j).animate({width:"110px",height:"110"},
100);$("#"+i+""+j).animate({width:"100px",height:"100"},100);$("#"+i+""+(j+1)).val("");score=score-0+($("#"+i+""+j).val()-0)}for(var i=0;i<4;i++)for(var j=0;j<4;j++)if($("#"+i+""+j).val()==0)$("#"+i+""+j).val("");i=track;j=0}
function addLeftMove(){var empty=new Array;var q=1;for(var x=0;x<=3;x++)for(var y=0;y<=3;y++)if($("#"+x+""+y).val()==""){empty[q]=x+""+y;q++}var randomIndex=Math.floor(Math.random()*empty.length);if(randomElement==0){$("#"+empty[randomIndex]).val("2");randomElement++}else{$("#"+empty[randomIndex]).val("4");randomElement=0}}function up(){for(var i=0;i<=3;i++){changeColor();subup(i);changeColor()}addUpMove();changeColor()}
function subup(i){var A=new Array;var track=i;count=1;for(var j=0;j<4;j++)if($("#"+j+""+i).val()!=""){A[count]=$("#"+j+""+i).val();count++}j=0;count--;for(var k=1;k<=count;k++){var test=$("#"+j+""+i).val(A[k]);j++}for(var h=j;h<4;h++){$("#"+h+""+i).val("");j++}j=0;if($("#"+j+""+i).val()==$("#"+(j+1)+""+i).val()&&$("#"+j+""+i).val()!=""&&$("#"+(j+1)+""+i).val()!=""){$("#"+j+""+i).val($("#"+j+""+i).val()-0+($("#"+(j+1)+""+i).val()-0));$("#"+j+""+i).animate({width:"110px",height:"110"},100);$("#"+j+
""+i).animate({width:"100px",height:"100"},100);$("#"+(j+1)+""+i).val("");score=score-0+($("#"+j+""+i).val()-0);var flag=1}for(var i=0;i<4;i++)for(var j=0;j<4;j++)if($("#"+j+""+i).val()==0)$("#"+j+""+i).val("");i=track;j=0}
function addUpMove(){var empty=new Array;var q=1;for(var x=0;x<4;x++)for(var y=0;y<4;y++)if($("#"+x+""+y).val()==""){empty[q]=x+""+y;q++}var randomIndex=Math.floor(Math.random()*empty.length);var randomElement=empty[randomIndex];if(randomElement==0){$("#"+empty[randomIndex]).val("2");randomElement++}else{$("#"+empty[randomIndex]).val("4");randomElement=0}}function right(){for(var i=0;i<=3;i++){changeColor();subright(i);changeColor()}addRightMove();changeColor()}
function subright(i){var A=new Array;var track=i;count=1;for(var j=0;j<4;j++)if($("#"+i+""+j).val()!=""){A[count]=$("#"+i+""+j).val();count++}j--;count--;for(var k=count;k>0;k--){var test=$("#"+i+""+j).val(A[k]);j--}for(var h=j;h>=0;h--){$("#"+i+""+h).val("");j--}for(j=3;j>=1;j--)if($("#"+i+""+j).val()==$("#"+i+""+(j-1)).val()&&$("#"+i+""+j).val()!=""&&$("#"+i+""+(j-1)).val()!=""){$("#"+i+""+j).val($("#"+i+""+j).val()-0+($("#"+i+""+(j-1)).val()-0));$("#"+i+""+j).animate({width:"110px",height:"110"},
100);$("#"+i+""+j).animate({width:"100px",height:"100"},100);$("#"+i+""+(j-1)).val("");score=score-0+($("#"+i+""+j).val()-0);var flag=1}for(var i=0;i<4;i++)for(var j=0;j<4;j++)if($("#"+i+""+j).val()==0)$("#"+i+""+j).val("");i=track;j=0}
function addRightMove(){var empty=new Array;var q=1;for(var x=0;x<4;x++)for(var y=0;y<4;y++)if($("#"+x+""+y).val()==""){empty[q]=x+""+y;q++}var randomIndex=Math.floor(Math.random()*empty.length);if(randomElement==0){$("#"+empty[randomIndex]).val("2");randomElement++}else{$("#"+empty[randomIndex]).val("4");randomElement=0}}function down(){for(var i=0;i<=3;i++){changeColor();subdown(i);changeColor()}addDownMove();changeColor()}
function subdown(i){var A=new Array;var track=i;count=1;for(var j=0;j<4;j++)if($("#"+j+""+i).val()!=""){A[count]=$("#"+j+""+i).val();count++}j--;count--;for(var k=count;k>0;k--){var test=$("#"+j+""+i).val(A[k]);j--}for(var h=j;h>=0;h--){$("#"+h+""+i).val("");j--}for(j=3;j>=1;j--)if($("#"+j+""+i).val()==$("#"+(j-1)+""+i).val()&&$("#"+j+""+i).val()!=""&&$("#"+(j-1)+""+i).val()!=""){$("#"+j+""+i).val($("#"+j+""+i).val()-0+($("#"+(j-1)+""+i).val()-0));$("#"+j+""+i).animate({width:"110px",height:"110"},
100);$("#"+j+""+i).animate({width:"100px",height:"100"},100);$("#"+(j-1)+""+i).val("");score=score-0+($("#"+j+""+i).val()-0);var flag=1}for(var i=0;i<4;i++)for(var j=0;j<4;j++)if($("#"+j+""+i).val()==0)$("#"+j+""+i).val("");i=track;j=0}
function addDownMove(){var empty=new Array;var q=1;for(var x=0;x<4;x++)for(var y=0;y<4;y++)if($("#"+x+""+y).val()==""){empty[q]=x+""+y;q++}var randomIndex=Math.floor(Math.random()*empty.length);if(randomElement==0){$("#"+empty[randomIndex]).val("2");randomElement++}else{$("#"+empty[randomIndex]).val("4");randomElement=0}}
function changeColor(){for(var m=0;m<=3;m++)for(var n=0;n<=3;n++){if($("#"+m+""+n).val()=="")$("#"+m+""+n).css("background-color","#DDD");if($("#"+m+""+n).val()==2){$("#"+m+""+n).css("background-color","#96C5D3");$("#"+m+""+n).css("color","#EEE")}if($("#"+m+""+n).val()==4){$("#"+m+""+n).css("background-color","#71B0C4");$("#"+m+""+n).css("color","#EEE")}if($("#"+m+""+n).val()==8){$("#"+m+""+n).css("background-color","#4691A6");$("#"+m+""+n).css("color","#EEE")}if($("#"+m+""+n).val()==16){$("#"+m+
""+n).css("background-color","#346A7A");$("#"+m+""+n).css("color","#EEE")}if($("#"+m+""+n).val()==32){$("#"+m+""+n).css("background-color","#044C65");$("#"+m+""+n).css("color","#EEE")}if($("#"+m+""+n).val()==64){$("#"+m+""+n).css("background-color","#4FCFEC");$("#"+m+""+n).css("color","#EEE")}if($("#"+m+""+n).val()==128){$("#"+m+""+n).css("background-color","#DDD");$("#"+m+""+n).css("color","#71B0C4")}if($("#"+m+""+n).val()==256){$("#"+m+""+n).css("background-color","#DDD");$("#"+m+""+n).css("color",
"#4691A6")}if($("#"+m+""+n).val()==512){$("#"+m+""+n).css("background-color","DDD");$("#"+m+""+n).css("color","#346A7A")}if($("#"+m+""+n).val()==1024){$("#"+m+""+n).css("background-color","DDD");$("#"+m+""+n).css("color","#044C65")}if($("#"+m+""+n).val()==2048){$("#"+m+""+n).css("background-color","#68b12f");$("#"+m+""+n).css("color","#EEE")}if($("#"+m+""+n).val()==4096){$("#"+m+""+n).css("background-color","#eb4141");$("#"+m+""+n).css("color","#EEE")}if($("#"+m+""+n).val()>4096){$("#"+m+""+n).css("background-color",
"green");$("#"+m+""+n).css("color","#EEE")}}}
function gameOver(){var game=0;var not=0;var full=0;for(var m=0;m<=3;m++)for(var n=0;n<=3;n++){if(m-1>=0)if($("#"+(m-1)+n+"").val()!=$("#"+m+n+"").val())game++;if(n-1>=0)if($("#"+m+(n-1)+"").val()!=$("#"+m+n+"").val())game++;if(m+1<=3)if($("#"+(m+1)+n+"").val()!=$("#"+m+n+"").val())game++;if(n+1<=3)if($("#"+m+(n+1)+"").val()!=$("#"+m+n+"").val())game++}for(var m=0;m<=3;m++)for(var n=0;n<=3;n++){if($("#"+m+""+n).val()!="")not++;if($("#"+m+""+n).val()==upperBound){full=1;break}}if(full==1)window.alert("YOU WIN !");
else if(game==48&&not==16)window.alert("GAME OVER :-( Hit Restart to try again..")};
